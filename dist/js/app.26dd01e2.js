(function(e){function t(t){for(var o,r,u=t[0],c=t[1],s=t[2],m=0,f=[];m<u.length;m++)r=u[m],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(f.length)f.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var u=n[r];0!==i[u]&&(o=!1)}o&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={app:0},i={app:0},a=[];function u(e){return c.p+"js/"+({analysis:"analysis",benchmarking:"benchmarking","home~monitordetail":"home~monitordetail",home:"home",monitordetail:"monitordetail",login:"login",main:"main",monitor:"monitor",setting:"setting",suggestion:"suggestion",warning:"warning"}[e]||e)+"."+{analysis:"d388cd4d",benchmarking:"c784d083","home~monitordetail":"8f809a2e",home:"c9ace643",monitordetail:"344d4968",login:"c48e6cb3",main:"9860d6d7",monitor:"0310e8af",setting:"1b3d95a9",suggestion:"e50fe78a",warning:"4eb2bcbf"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={analysis:1,benchmarking:1,home:1,monitordetail:1,login:1,main:1,monitor:1,setting:1,suggestion:1,warning:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="css/"+({analysis:"analysis",benchmarking:"benchmarking","home~monitordetail":"home~monitordetail",home:"home",monitordetail:"monitordetail",login:"login",main:"main",monitor:"monitor",setting:"setting",suggestion:"suggestion",warning:"warning"}[e]||e)+"."+{analysis:"2618a3e4",benchmarking:"70758962","home~monitordetail":"31d6cfe0",home:"0fbc04db",monitordetail:"d380e038",login:"701584ae",main:"8170f450",monitor:"c738fd60",setting:"9cc1143c",suggestion:"46df5591",warning:"afb1970d"}[e]+".css",i=c.p+o,a=document.getElementsByTagName("link"),u=0;u<a.length;u++){var s=a[u],m=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(m===o||m===i))return t()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){s=f[u],m=s.getAttribute("data-href");if(m===o||m===i)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var o=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete r[e],d.parentNode.removeChild(d),n(a)},d.href=i;var l=document.getElementsByTagName("head")[0];l.appendChild(d)})).then((function(){r[e]=0})));var o=i[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,n){o=i[e]=[t,n]}));t.push(o[2]=a);var s,m=document.createElement("script");m.charset="utf-8",m.timeout=120,c.nc&&m.setAttribute("nonce",c.nc),m.src=u(e);var f=new Error;s=function(t){m.onerror=m.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",f.name="ChunkLoadError",f.type=o,f.request=r,n[1](f)}i[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:m})}),12e4);m.onerror=m.onload=s,document.head.appendChild(m)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],m=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var d=m;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"090b":function(e,t,n){},"69de":function(e,t,n){"use strict";n("090b")},"8e1f":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var o=n("7a23");function r(e,t,n,r,i,a){const u=Object(o["M"])("router-view");return Object(o["D"])(),Object(o["i"])(u)}var i=n("5502"),a=n("6c02"),u=n("3fd4"),c=n("bc3a"),s=n.n(c),m=Object(o["n"])({name:"App",setup:function(){var e=Object(i["b"])(),t=Object(o["g"])((function(){return e.state.user})),n=Object(o["g"])((function(){return e.state.loading})),r=Object(o["g"])((function(){return e.state.token})),c=Object(o["g"])((function(){return e.state.error})),m=Object(a["d"])(),f=Object(o["I"])(m.name);Object(a["c"])((function(e){console.log(e,"监听到变化"),console.log(f)})),Object(o["A"])((function(){!t.value.isLogin&&r.value&&(s.a.defaults.headers.common.Authorization="Bearer "+r.value,e.dispatch("fetchCurrentUser").then((function(e){console.log(e)})))})),Object(o["Y"])((function(){return c.value.status}),(function(){var e=c.value,t=e.status,n=e.message;t&&n&&u["q"].error(n)})),Object(o["Y"])((function(){return n.value}),(function(){}))}});n("69de");m.render=r;var f=m,d=n("9ab4");var l=[{_id:"1",name:"a"},{_id:"2",name:"b"}],g=function(e){return e.reduce((function(e,t){return t._id&&(e[t._id]=t),e}),{})},h=g(l);console.log(h);var v=function(e){return Object.keys(e).map((function(t){return e[t]}))},b={1:{_id:"1",name:"a"},2:{_id:"2",name:"b"}},p=v(b);console.log(p);var y=function(e,t,n,o,r){return void 0===o&&(o={method:"get"}),Object(d["b"])(void 0,void 0,void 0,(function(){var i;return Object(d["c"])(this,(function(a){switch(a.label){case 0:return[4,s()(e,o)];case 1:return i=a.sent().data,n(t,r?{data:i,extraData:r}:i),[2,i]}}))}))},L=Object(i["a"])({state:{token:localStorage.getItem("token")||"",error:{status:!1},loading:!1,user:{isLogin:!1},homeData:{},meteoData:{},deviceInfos:{},dviceStatusInfos:{},columns:{data:{},currentPage:0,total:0},powerStationInfo:{},transformerListInfo:{},inverterListInfo:{},combinerBoxListInfo:{},pvstringListInfo:{},pvstringDetailProps:{}},mutations:{login:function(e,t){var n=t.data.token;e.token=n,e.user=Object(d["a"])(Object(d["a"])({},e.user),{isLogin:!0}),localStorage.setItem("token",n),s.a.defaults.headers.common.Authorization="Bearer "+n},logout:function(e){e.token="",e.user={isLogin:!1},localStorage.remove("token"),delete s.a.defaults.headers.common.Authorization},fetchCurrentUser:function(e,t){e.user=Object(d["a"])({isLogin:!0},t.data)},getHomeData:function(e,t){e.homeData=t.data},getMeteoData:function(e,t){e.meteoData=t.entity},getDevicesInfo:function(e,t){e.deviceInfos=t.entity},getDeviceStatusInfo:function(e,t){e.dviceStatusInfos=t.entity},setLoading:function(e,t){e.loading=t},setError:function(e,t){e.error=t},fetchColumn:function(e,t){e.columns.data[t.data._id]=t.data},fetchColumns:function(e,t){var n=e.columns.data,o=t.data,r=(o.list,o.count),i=o.currentPage;e.columns={data:Object(d["a"])({},n),total:r,currentPage:1*i}},setPowerStationInfo:function(e,t){e.powerStationInfo=t.entity},setTransformerList:function(e,t){e.transformerListInfo=t.entity},setInverterList:function(e,t){e.inverterListInfo=t.entity},setCombinerBoxList:function(e,t){e.combinerBoxListInfo=t.entity},setPvstringList:function(e,t){e.pvstringListInfo=t.entity},setPvstringDetail:function(e,t){e.pvstringDetailProps=t.entity}},actions:{login:function(e,t){var n=e.commit;return y("/user/login","login",n,{method:"post"},t)},fetchCurrentUser:function(e){var t=e.commit;return y("/user/current","fetchCurrentUser",t)},getHomeData:function(e,t){var n=e.commit;return Object(d["b"])(this,void 0,void 0,(function(){var e;return Object(d["c"])(this,(function(o){switch(o.label){case 0:return[4,s.a.get("/columns/"+t)];case 1:return e=o.sent().data,n("getHomeData",e),[2]}}))}))},getHomeDatas:function(e,t){var n=e.commit;s.a.get("/columns/"+t).then((function(e){n("getHomeData",e.data)}))},loginAndFetch:function(e,t){var n=e.dispatch;return n("login",t).then((function(){return n("fetchCurrentUser")}))},getMeteoData:function(e,t){var n=e.commit;return y("/web/sidebar/getmeteodata","getMeteoData",n,{method:"post"},t)},getDevicesInfo:function(e,t){var n=e.commit;return y("/web/sidebar/getdevicesinfo","getDevicesInfo",n,{method:"post"},t)},getDeviceStatusInfo:function(e,t){var n=e.commit;return y("/web/sidebar/getdevicestatusinfo","getDeviceStatusInfo",n,{method:"post",data:t})},fetchColumns:function(e,t){var n=e.state,o=e.commit;void 0===t&&(t={});var r=t.currentPage,i=void 0===r?1:r,a=t.pageSize,u=void 0===a?6:a;if(n.columns.currentPage<i)return y("/columns?currentPage="+i+"&pageSize="+u,"fetchColumns",o)},fetchColumn:function(e,t){var n=e.state,o=e.commit;if(!n.columns.data[t])return y("/columns/"+t,"fetchColumn",o)},getPowerStationInfo:function(e,t){var n=e.commit;return y("/web/home/getpowerstationinfo","setPowerStationInfo",n,{method:"post",data:t})},getTransformerList:function(e,t){var n=e.commit;return y("/web/device/gettransformerlist","setTransformerList",n,{method:"post",data:t})},getInverterList:function(e,t){var n=e.commit;return y("/web/device/getinverterlist","setInverterList",n,{method:"post",data:t})},getCombinerBoxList:function(e,t){var n=e.commit;return y("/web/device/getcombinerboxlist","setCombinerBoxList",n,{method:"post",data:t})},getPvStringList:function(e,t){var n=e.commit;return y("/web/device/getpvstringlist","setPvstringList",n,{method:"post",data:t})},getPvStringDetail:function(e,t){var n=e.commit;return y("/web/device/getpvstringdetail","setPvstringDetail",n,{method:"post",data:t})}},modules:{},getters:{getColumns:function(e){return v(e.columns.data)},getColumnById:function(e){return function(t){return e.columns.data[t]}}}}),w=[{path:"/login",name:"Login",component:function(){return n.e("login").then(n.bind(null,"a55b"))},meta:{redirectAlreadyLogin:!0},beforeEnter:function(e,t,n){var o=L.state.user.isLogin;o?n({name:"Home"}):n()}},{path:"/",name:"Main",component:function(){return n.e("main").then(n.bind(null,"cd56"))},meta:{requiredLogin:!1},children:[{path:"/home",name:"Home",component:function(){return Promise.all([n.e("home~monitordetail"),n.e("home")]).then(n.bind(null,"bb51"))},meta:{requiredLogin:!1}},{path:"/benchmarking",name:"Benchmarking",component:function(){return n.e("benchmarking").then(n.bind(null,"f29d"))},meta:{requiredLogin:!0}},{path:"/device",name:"Monitor",component:function(){return n.e("monitor").then(n.bind(null,"a373"))},meta:{requiredLogin:!1}},{path:"/monitordetail/:id",name:"MonitorDetail",component:function(){return Promise.all([n.e("home~monitordetail"),n.e("monitordetail")]).then(n.bind(null,"723c"))},meta:{requiredLogin:!1}},{path:"/warning",name:"Warning",component:function(){return n.e("warning").then(n.bind(null,"fb9d"))},meta:{requiredLogin:!0}},{path:"/analysis",name:"Analysis",component:function(){return n.e("analysis").then(n.bind(null,"9aef"))},meta:{requiredLogin:!1}},{path:"/suggestion",name:"Suggestion",component:function(){return n.e("suggestion").then(n.bind(null,"7941"))},meta:{requiredLogin:!0}},{path:"/setting",name:"Setting",component:function(){return n.e("setting").then(n.bind(null,"4ef5"))},meta:{requiredLogin:!0}}]}],j=Object(a["b"])(),O=Object(a["a"])({history:j,routes:w});O.beforeEach((function(e,t,n){var o=L.state,r=o.user,i=o.token,a=e.meta,u=a.requiredLogin,c=a.redirectAlreadyLogin;r.isLogin?c?n("/"):n():i?(s.a.defaults.headers.common.Authorization="Bearer "+i,L.dispatch("fetchCurrentUser").then((function(){c?n("/"):n()})).catch((function(e){console.error(e),L.commit("logout"),n("login")}))):u?n("login"):n()}));var I=O,P=n("77ed"),k=n.n(P),D=(n("7dd6"),n("3ef0")),S=n.n(D),C=(n("a471"),n("51d4")),E=n.n(C);n("f5df"),n("8e1f");s.a.defaults.baseURL="http://119.3.177.188:8080/api",s.a.interceptors.request.use((function(e){return L.commit("setLoading",!0),L.commit("setError",{status:!1,message:""}),e})),s.a.interceptors.response.use((function(e){return L.commit("setLoading",!1),e}),(function(e){var t={status:!1,message:e.response.data.msg};return L.commit("setError",t),L.commit("setLoading",!1),Promise.reject(t)}));var q=Object(o["h"])(f);q.use(I),q.use(L),q.use(k.a),E.a.use(S.a);var A=[u["b"],u["n"],u["u"],u["j"],u["k"],u["q"],u["s"],u["t"],u["d"],u["c"],u["e"],u["l"],u["a"],u["p"],u["i"],u["m"],u["f"],u["g"],u["h"]];A.forEach((function(e){q.component(e.name,e)}));var _=[u["o"],u["q"],u["r"]];_.forEach((function(e){q.use(e)})),q.config.globalProperties.$ELEMENT={size:"medium",zIndex:2e3},q.use(u["b"]),q.mount("#app")}});
//# sourceMappingURL=app.26dd01e2.js.map